#!/bin/zsh

NO_COLOR='\e[0m'
BLACK='\e[0;30m'
GRAY='\e[37m'
RED='\e[0;31m'
GREEN='\e[0;32m'
YELLOW='\e[0;33m'
BLUE='\e[0;34m'
PURPLE='\e[0;35m'
CYAN='\e[0;36m'
WHITE='\e[0;37m'
BOLD_BLACK='\e[1;30m'
BOLD_RED='\e[1;31m'
BOLD_GREEN='\e[1;32m'
BOLD_YELLOW='\e[1;33m'
BOLD_BLUE='\e[1;34m'
BOLD_PURPLE='\e[1;35m'
BOLD_CYAN='\e[1;36m'
BOLD_WHITE='\e[1;37m'

INFO="${BLUE}[info]${NO_COLOR}"
SUCCESS="${GREEN}[success]${NO_COLOR}"

# Version
# =========================================================
VERSION="${GRAY}v0.0.1${NO_COLOR}"


# Header
# =========================================================
echo "${BOLD_WHITE}@thiagobraga's dotfiles ${VERSION}"


# Install Oh My ZSH
# =========================================================
echo "${INFO} Install Oh My ZSH"
echo "${INFO} Checking if it is installed"
[ -d ${HOME}/.oh-my-zsh ] && echo "${SUCCESS} âœ…  Already installed." && return
echo "${INFO} Installing..."
OHMYZSH=https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh
sh -c "$(curl -fsSL ${ZSH_URL})"
echo 'âœ…  Done'

return

# Install Spaceship Theme
# =========================================================
echo '\nðŸ›   Install Spaceship Theme for Oh My ZSH'
SPACESHIP_PATH=${ZSH_CUSTOM}/themes/spaceship-prompt
if [[ ! -d "${SPACESHIP_PATH}" ]]; then
  git clone https://github.com/denysdovhan/spaceship-prompt.git ${SPACESHIP_PATH}
  ln -s ${SPACESHIP_PATH}/spaceship.zsh-theme ${ZSH_CUSTOM}/themes/spaceship.zsh-theme
  echo 'âœ…  Done'
else
  echo "âœ…  You've already have Spaceship installed"
  echo 'ðŸ”ƒ  Updating...'
  git --work-tree=${SPACESHIP_PATH} pull origin master
  echo 'âœ…  Spaceship updated'
fi

# Install zsh-syntax-highlight
# =========================================================
git clone \
  https://github.com/zsh-users/zsh-syntax-highlighting.git \
  ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting


# "Restart to Windows" shortcut
# =========================================================
echo -e '\nðŸ›   Creating "Restart to Windows" shortcuts'
sudo cp -f ./shortcuts/windows.png \
  ./shortcuts/windows.sh \
  ./shortcuts/windows.desktop \
  /usr/share/applications/

sudo chmod 644 /usr/share/applications/windows.{sh,desktop,png}
sudo chmod -x /usr/share/applications/windows.desktop
sudo chmod +x /usr/share/applications/windows.sh

echo 'âœ…  Done'


# Install zsh-autosuggestions
# =========================================================
echo '[Dotfiles] Install zsh-autosuggestions...'
if [[ ! -d "${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions" ]]; then
  git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
fi

# Disable screen lock and screen blackout
# =========================================================
gsettings set org.gnome.desktop.session idle-delay 0
gsettings set org.gnome.desktop.screensaver lock-enabled false
gsettings set com.canonical.indicator.session suppress-logout-restart-shutdown true

